{"version":3,"file":"redirect-write-file-compiler-host.js","sourceRoot":"","sources":["../../../src/lib/ts/redirect-write-file-compiler-host.ts"],"names":[],"mappings":";;AAAA,+BAA+B;AAE/B,6BAA6B;AAE7B;;;;;;GAMG;AACH,uCACE,YAA6B,EAC7B,OAAe,EACf,MAAc;IAEd,MAAM,mBACD,YAAY,IACf,SAAS,EAAE,CACT,QAAgB,EAChB,IAAY,EACZ,kBAA2B,EAC3B,OAAmC,EACnC,WAA0C,EAC1C,EAAE;YACF,MAAM,mBAAmB,GAAG,IAAI,CAAC,QAAQ,CAAC,OAAO,EAAE,QAAQ,CAAC,CAAC;YAC7D,MAAM,QAAQ,GAAG,IAAI,CAAC,OAAO,CAAC,MAAM,EAAE,mBAAmB,CAAC,CAAC;YAC3D,EAAE,CAAC,cAAc,CAAC,QAAQ,EAAE,IAAI,CAAC,CAAC;QACpC,CAAC,IACD;AACJ,CAAC;AAnBD,sEAmBC","sourcesContent":["import * as fs from 'fs-extra';\nimport * as ts from 'typescript';\nimport * as path from 'path';\n\n/**\n * Returns a TypeScript compiler host that redirects `writeFile` output to the given `outDir`.\n *\n * @param compilerHost Original compiler host\n * @param baseDir Project base directory\n * @param outDir Target directory\n */\nexport function redirectWriteFileCompilerHost(\n  compilerHost: ts.CompilerHost,\n  baseDir: string,\n  outDir: string\n): ts.CompilerHost {\n  return {\n    ...compilerHost,\n    writeFile: (\n      fileName: string,\n      data: string,\n      writeByteOrderMark: boolean,\n      onError?: (message: string) => void,\n      sourceFiles?: ReadonlyArray<ts.SourceFile>\n    ) => {\n      const projectRelativePath = path.relative(baseDir, fileName);\n      const filePath = path.resolve(outDir, projectRelativePath);\n      fs.outputFileSync(filePath, data);\n    }\n  };\n}\n"]}