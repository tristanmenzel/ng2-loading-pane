{"version":3,"file":"artefacts.js","sourceRoot":"","sources":["../../../src/lib/ng-package-format/artefacts.ts"],"names":[],"mappings":"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","sourcesContent":["import * as path from 'path';\nimport * as ts from 'typescript';\nimport { TsConfig } from '../ts/tsconfig';\nimport { NgEntryPoint } from './entry-point';\nimport { NgPackage } from './package';\n\n/**\n * Build artefacts generated for an entry point (Angular library).\n *\n * The artefacts include distribution-ready 'binaries' as well as temporary files and\n * intermediate build output.\n *\n * @deprecated\n */\nexport class NgArtefacts {\n  /** Directory for temporary files */\n  public readonly stageDir: string;\n\n  /** Directory for build output */\n  public readonly outDir: string;\n\n  private _extras: Map<string, any> = new Map();\n\n  constructor(entryPoint: NgEntryPoint, pkg: NgPackage) {\n    this.stageDir = path.resolve(pkg.workingDirectory, entryPoint.flatModuleFile, 'stage');\n    this.outDir = path.resolve(pkg.workingDirectory, entryPoint.flatModuleFile, 'out');\n  }\n\n  public extras<T>(key: string): T;\n  public extras<T>(key: string, value: T);\n  public extras<T>(key: string, value?: T): T | undefined {\n    if (value !== undefined) {\n      // write\n      this._extras.set(key, value);\n    } else {\n      // read\n      return this._extras.get(key);\n    }\n  }\n\n  public get tsConfig(): TsConfig {\n    return this.extras('tsConfig');\n  }\n\n  public set tsConfig(value: TsConfig) {\n    this.extras('tsConfig', value);\n  }\n\n  public get tsSources(): ts.TransformationResult<ts.SourceFile> {\n    return this.extras('tsSources');\n  }\n\n  public set tsSources(value: ts.TransformationResult<ts.SourceFile>) {\n    this.extras('tsSources', value);\n  }\n\n  public template(file: string): string;\n  public template(file: string, content: string);\n  public template(file: string, content?: string): string | undefined {\n    if (content !== undefined) {\n      // write\n      this.extras(`template:${file}`, content);\n    } else {\n      // read\n      return this.extras(`template:${file}`);\n    }\n  }\n\n  public templates(): string[] {\n    return Array.from(this._extras.keys())\n      .filter(key => key.startsWith('template:'))\n      .map(key => key.substring('template:'.length));\n  }\n\n  public stylesheet(file: string): string;\n  public stylesheet(file: string, content: string);\n  public stylesheet(file: string, content?: string): string | undefined {\n    if (content !== undefined) {\n      // write\n      this.extras(`stylesheet:${file}`, content);\n    } else {\n      // read\n      return this.extras(`stylesheet:${file}`);\n    }\n  }\n\n  public stylesheets(): string[] {\n    return Array.from(this._extras.keys())\n      .filter(key => key.startsWith('stylesheet:'))\n      .map(key => key.substring('stylesheet:'.length));\n  }\n\n  public get es2015EntryFile(): string {\n    return this.extras('es2015:entryFile');\n  }\n\n  public set es2015EntryFile(filePath: string) {\n    this.extras('es2015:entryFile', filePath);\n  }\n\n  public get typingsEntryFile(): string {\n    return this.extras('typings:entryFile');\n  }\n\n  public set typingsEntryFile(filePath: string) {\n    this.extras('typings:entryFile', filePath);\n  }\n\n  public get fesm15BundleFile(): string {\n    return this.extras('fesm15:bundleFile');\n  }\n\n  public set fesm15BundleFile(filePath: string) {\n    this.extras('fesm15:bundleFile', filePath);\n  }\n\n  public get fesm5BundleFile(): string {\n    return this.extras('fesm5:bundleFile');\n  }\n\n  public set fesm5BundleFile(filePath: string) {\n    this.extras('fesm5:bundleFile', filePath);\n  }\n\n  public get umdBundleFile(): string {\n    return this.extras('umd:bundleFile');\n  }\n\n  public set umdBundleFile(filePath: string) {\n    this.extras('umd:bundleFile', filePath);\n  }\n\n  public get aotBundleFile(): string {\n    return this.extras('aot:bundleFile');\n  }\n\n  public set aotBundleFile(filePath: string) {\n    this.extras('aot:bundleFile', filePath);\n  }\n}\n"]}