{"version":3,"file":"init-tsconfig.transform.js","sourceRoot":"","sources":["../../../../../src/lib/ng-v5/entry-point/ts/init-tsconfig.transform.ts"],"names":[],"mappings":";;;;;;;;;;AAGA,wDAA2E;AAC3E,mDAAoE;AACpE,yCAAyC;AACzC,6DAAoE;AAEvD,QAAA,4BAA4B,GAAG,CAAC,eAAyB,EAAa,EAAE,CACnF,gCAAoB,CAAC,CAAM,KAAK,EAAC,EAAE;IACjC,GAAG,CAAC,KAAK,CAAC,uBAAuB,CAAC,CAAC;IAEnC,4CAA4C;IAC5C,MAAM,UAAU,GAAG,KAAK,CAAC,IAAI,CAAC,+BAAY,EAAE,CAAC,GAAG,CAAC,+BAAY,CAAC,CAAC,CAAC;IAEhE,MAAM,QAAQ,GAAG,6BAAkB,CAAC,eAAe,EAAE,UAAU,CAAC,IAAI,CAAC,UAAU,EAAE,UAAU,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;IAEzG,UAAU,CAAC,IAAI,CAAC,QAAQ,GAAG,QAAQ,CAAC;IAEpC,MAAM,CAAC,KAAK,CAAC;AACf,CAAC,CAAA,CAAC,CAAC","sourcesContent":["import { ParsedConfiguration } from '@angular/compiler-cli';\nimport { BuildGraph } from '../../../brocc/build-graph';\nimport { Node } from '../../../brocc/node';\nimport { Transform, transformFromPromise } from '../../../brocc/transform';\nimport { TsConfig, initializeTsConfig } from '../../../ts/tsconfig';\nimport * as log from '../../../util/log';\nimport { byEntryPoint, isInProgress } from '../../entry-point.node';\n\nexport const initTsConfigTransformFactory = (defaultTsConfig: TsConfig): Transform =>\n  transformFromPromise(async graph => {\n    log.debug(`Initializing tsconfig`);\n\n    // Peek the first entry point from the graph\n    const entryPoint = graph.find(byEntryPoint().and(isInProgress));\n\n    const tsConfig = initializeTsConfig(defaultTsConfig, entryPoint.data.entryPoint, entryPoint.data.outDir);\n\n    entryPoint.data.tsConfig = tsConfig;\n\n    return graph;\n  });\n"]}